(()=>{var e={};e.id=385,e.ids=[385],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},17858:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var a=r(50482),s=r(69108),i=r(62563),n=r.n(i),o=r(68300),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let d=["",{children:["account",{children:["reservations",{children:["edit",{children:["[bookingId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92154)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/account/reservations/edit/[bookingId]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11615)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/account/layout.js"],loading:[()=>Promise.resolve().then(r.bind(r,69547)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/account/loading.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,57575)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/layout.js"],error:[()=>Promise.resolve().then(r.bind(r,60826)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/error.js"],loading:[()=>Promise.resolve().then(r.bind(r,65016)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/loading.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,46178)),"/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/account/reservations/edit/[bookingId]/page.js"],u="/account/reservations/edit/[bookingId]/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/account/reservations/edit/[bookingId]/page",pathname:"/account/reservations/edit/[bookingId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80116:(e,t,r)=>{let a={"45953ffb108646919dd5fd7cd1b4f19e0a8853b6":()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.updateGuest),"6182984aa3f244e6f2c05685f95f4357ccd76f08":()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.updateBooking),b3d24d481e4d2580cf16aad78d53018774c1fb2b:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.signOutAction),c2ad86b095a4f6ba924bd188fc13a40f01ac187c:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.deleteBooking),cd19413f02c8e0458240ad138ae717650f41b43d:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.createBooking),f485c6f23386379dbdff37c4e9c9b0f1c58d33d4:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.signInAction)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"45953ffb108646919dd5fd7cd1b4f19e0a8853b6":s.bind(null,"45953ffb108646919dd5fd7cd1b4f19e0a8853b6"),"6182984aa3f244e6f2c05685f95f4357ccd76f08":s.bind(null,"6182984aa3f244e6f2c05685f95f4357ccd76f08"),b3d24d481e4d2580cf16aad78d53018774c1fb2b:s.bind(null,"b3d24d481e4d2580cf16aad78d53018774c1fb2b"),c2ad86b095a4f6ba924bd188fc13a40f01ac187c:s.bind(null,"c2ad86b095a4f6ba924bd188fc13a40f01ac187c"),cd19413f02c8e0458240ad138ae717650f41b43d:s.bind(null,"cd19413f02c8e0458240ad138ae717650f41b43d"),f485c6f23386379dbdff37c4e9c9b0f1c58d33d4:s.bind(null,"f485c6f23386379dbdff37c4e9c9b0f1c58d33d4")}},5450:(e,t,r)=>{Promise.resolve().then(r.bind(r,27214))},645:(e,t,r)=>{Promise.resolve().then(r.bind(r,92787))},27214:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(95344),s=r(56506),i=r(3729);let n=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),i.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}),o=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),i.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}),c=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}),d=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))});var l=r(82084);let u=function(){return a.jsx("form",{action:l.NH,children:(0,a.jsxs)("button",{className:"py-3 px-5 hover:bg-primary-900 hover:text-primary-100 transition-colors flex items-center gap-4 font-semibold text-primary-200 w-full",children:[a.jsx(d,{className:"h-5 w-5 text-primary-600"}),a.jsx("span",{children:"Sign out"})]})})};var f=r(8428);let p=[{name:"Home",href:"/account",icon:a.jsx(n,{className:"h-5 w-5 text-primary-600"})},{name:"Reservations",href:"/account/reservations",icon:a.jsx(o,{className:"h-5 w-5 text-primary-600"})},{name:"Guest profile",href:"/account/profile",icon:a.jsx(c,{className:"h-5 w-5 text-primary-600"})}],b=function(){let e=(0,f.usePathname)();return a.jsx("nav",{className:"border-r border-primary-900",children:(0,a.jsxs)("ul",{className:"flex flex-col gap-2 h-full text-lg",children:[p.map(t=>a.jsx("li",{children:(0,a.jsxs)(s.default,{className:`py-3 px-5 hover:bg-primary-900 hover:text-primary-100 transition-colors flex items-center gap-4 font-semibold text-primary-200 ${e===t.href?"bg-primary-900":""}`,href:t.href,children:[t.icon,a.jsx("span",{children:t.name})]})},t.name)),a.jsx("li",{className:"mt-auto",children:a.jsx(u,{})})]})})}},92787:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(95344),s=r(81202);function i({children:e,pendingLabel:t}){let{pending:r}=(0,s.useFormStatus)();return a.jsx("button",{className:"bg-accent-500 px-8 py-4 text-primary-800 font-semibold hover:bg-accent-600 transition-all disabled:cursor-not-allowed disabled:bg-gray-500 disabled:text-gray-300",disabled:r,children:r?t:e})}},56506:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(61476),s=r.n(a)},8428:(e,t,r)=>{"use strict";var a=r(14767);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},28371:(e,t,r)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return s}});let a=r(13664);function s(e){let{createServerReference:t}=r(82228);return t(e,a.callServer)}},10752:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createBooking:()=>l,deleteBooking:()=>u,signInAction:()=>p,signOutAction:()=>b,updateBooking:()=>f,updateGuest:()=>d});var a=r(31542);r(68616);var s=r(42735),i=r(66563),n=r(61024),o=r(36448),c=r(867);async function d(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");let r=e.get("nationalID"),[a,i]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(r))throw Error("Please provide a valid national ID");let{data:c,error:d}=await n.O.from("guests").update({nationality:a,countryFlag:i,nationalID:r}).eq("id",t.user.guestId);if(d)throw Error("Guest could not be updated");(0,o.revalidatePath)("/account/profile")}async function l(e,t){let r=await (0,s.I8)();if(!r)throw Error("You must be logged in");let a={...e,guestId:r.user.guestId,numGuests:Number(t.get("numGuests")),observations:t.get("observations").slice(0,1e3),extrasPrice:0,totalPrice:e.cabinPrice,isPaid:!1,hasBreakfast:!1,status:"unconfirmed"},{error:i}=await n.O.from("bookings").insert([a]);if(i)throw Error("Booking could not be created");(0,o.revalidatePath)(`/cabins/${e.cabinId}`),(0,c.redirect)("/cabins/thankyou")}async function u(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");if(!(await (0,i.aL)(t.user.guestId)).map(e=>e.id).includes(e))throw Error("You are not allowed to delete this booking");let{error:r}=await n.O.from("bookings").delete().eq("id",e);if(r)throw Error("Booking could not be deleted");(0,o.revalidatePath)("/account/reservations")}async function f(e){let t=Number(e.get("bookingId")),r=await (0,s.I8)();if(!r)throw Error("You must be logged in");if(!(await (0,i.aL)(r.user.guestId)).map(e=>e.id).includes(t))throw Error("You are not allowed to update this booking");let a={numGuests:Number(e.get("numGuests")),observations:e.get("observations").slice(0,1e3)},{error:d}=await n.O.from("bookings").update(a).eq("id",t).select().single();if(d)throw Error("Booking could not be updated");(0,o.revalidatePath)(`/account/reservations/edit/${t}`),(0,o.revalidatePath)("/account/reservations"),(0,c.redirect)("/account/reservations")}async function p(){await (0,s.zB)("google",{redirectTo:"/account"})}async function b(){await (0,s.w7)({redirectTo:"/"})}(0,r(42053).h)([d,l,u,f,p,b]),(0,a.j)("45953ffb108646919dd5fd7cd1b4f19e0a8853b6",d),(0,a.j)("cd19413f02c8e0458240ad138ae717650f41b43d",l),(0,a.j)("c2ad86b095a4f6ba924bd188fc13a40f01ac187c",u),(0,a.j)("6182984aa3f244e6f2c05685f95f4357ccd76f08",f),(0,a.j)("f485c6f23386379dbdff37c4e9c9b0f1c58d33d4",p),(0,a.j)("b3d24d481e4d2580cf16aad78d53018774c1fb2b",b)},11615:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(25036);let s=(0,r(86843).createProxy)(String.raw`/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/_components/SideNavigation.js`),{__esModule:i,$$typeof:n}=s,o=s.default;function c({children:e}){return(0,a.jsxs)("div",{className:"grid grid-cols-[16rem_1fr] h-full gap-12",children:[a.jsx(o,{}),a.jsx("div",{className:"py-1",children:e})]})}},69547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(25036),s=r(15300);function i(){return a.jsx(s.Z,{})}},92154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(25036);let s=(0,r(86843).createProxy)(String.raw`/Users/rekha/Desktop/react-projects/The-Wild-Oasis-website/app/_components/SubmitButton.js`),{__esModule:i,$$typeof:n}=s,o=s.default;var c=r(10752),d=r(66563);async function l({params:e}){let{bookingId:t}=e,{numGuests:r,observations:s,cabinId:i}=await (0,d.lx)(t),{maxCapacity:n}=await (0,d.$_)(i);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"font-semibold text-2xl text-accent-400 mb-7",children:["Edit Reservation #",t]}),(0,a.jsxs)("form",{action:c.updateBooking,className:"bg-primary-900 py-8 px-12 text-lg flex gap-6 flex-col",children:[a.jsx("input",{type:"hidden",value:t,name:"bookingId"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"numGuests",children:"How many guests?"}),(0,a.jsxs)("select",{name:"numGuests",id:"numGuests",defaultValue:r,className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm",required:!0,children:[a.jsx("option",{value:"",children:"Select number of guests..."},""),Array.from({length:n},(e,t)=>t+1).map(e=>(0,a.jsxs)("option",{value:e,children:[e," ",1===e?"guest":"guests"]},e))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"observations",children:"Anything we should know about your stay?"}),a.jsx("textarea",{name:"observations",defaultValue:s,className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm"})]}),a.jsx("div",{className:"flex justify-end items-center gap-6",children:a.jsx(o,{pendingLabel:"Updating...",children:"Update reservation"})})]})]})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,548,441,225,864,222,74],()=>r(17858));module.exports=a})();